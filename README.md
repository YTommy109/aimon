# AI-MAN: AI Multi-Agent Network

## 概要

AI-MAN (AI Multi-Agent Network) は、指定されたディレクトリに対して、**内蔵AIツール**を非同期で実行し、その進捗状況を管理するためのWebアプリケーションです。

Streamlit製のUIを通じて、ユーザーは以下の操作を行うことができます。

- 実行したいAIツール（OVERVIEW/REVIEW）と対象のディレクトリパスから「プロジェクト」を作成する。
- 作成したプロジェクトの実行を指示し、内蔵処理器を通じてAIツールを実行する。
- 実行中のプロジェクトのステータスをリアルタイムで確認する。
- プロジェクトの詳細情報をモーダルで表示する。

バックグラウンドでは、各プロジェクトが独立した処理として実行されるため、複数のタスクを並行して処理することが可能です。

## 技術スタック

- **言語**: Python 3.12
- **パッケージ管理**: uv
- **Webフレームワーク**: Streamlit
- **タスクランナー**: just
- **テスト**: pytest, pytest-cov
- **静的解析・フォーマット**: ruff
- **その他**: Pydantic (データ検証)

## 開発環境のセットアップ

1. **リポジトリのクローン**:

    ```bash
    git clone <repository_url>
    cd aiman
    ```

2. **環境変数の設定**:
    このプロジェクトでは、`.env` ファイルを使って環境変数を管理します。`env_sample` をコピーして `.env` を作成してください。

    ```bash
    cp env_sample .env
    ```

    必要に応じて、開発環境用（`.env.dev`）やテスト環境用（`.env.test`）も作成できます。

## 実行方法

各種コマンドは `just` を使って実行します。

- **アプリケーションの起動**:

  ```bash
  just run          # 開発環境
  just run test     # テスト環境
  ```

  `http://localhost:8501` にアクセスしてください。

- **テストの実行**:

  ```bash
  just test
  ```

- **テストカバレッジの計測**:

  ```bash
  just coverage
  ```

- **LinterとFormatterの実行**:

  ```bash
  just lint
  ```

## 内蔵AIツール

### 概要

AI-MANでは、2つの内蔵AIツールを提供しています：

- **OVERVIEW**: 指定されたディレクトリの内容を分析し、概要を生成
- **REVIEW**: 指定されたディレクトリのコードをレビューし、改善提案を生成

### ツールの特徴

- **固定選択**: ユーザーは事前定義された2つのツールから選択
- **内蔵処理**: 外部コマンドに依存せず、アプリ内で処理を実行
- **非同期実行**: 複数のプロジェクトを並行して処理
- **結果保存**: 実行結果は指定されたディレクトリに保存

### セキュリティ機能

- **内蔵処理**: 外部コマンド実行によるセキュリティリスクを排除
- **実行タイムアウト**: 適切なタイムアウト設定
- **ファイル出力制限**: 指定されたディレクトリ内のみに出力
