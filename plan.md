# AI-MAN 開発計画

## フェーズ1: AIツールモデルとコマンド実行機能の実装

### 1.1 AIToolモデルの更新

現在のAIToolモデルはendpoint_urlベースの設計になっているが、コマンド実行ベースの設計に変更する必要がある。

- [x] AIToolモデルにcommandフィールドを追加し、endpoint_urlから移行する設計を検討する
- [x] 既存のai_tools.jsonとの互換性を保ちながら、新しいフィールド構造をサポートする
- [x] AIToolServiceでコマンド実行ロジックを実装し、Geminiを特別なツールとして扱う仕組みを作る

### 1.2 AI ツール選択メニューの拡張

プロジェクト作成時のAIツール選択で、JSONから読み込んだツールに加えて、組み込みのGeminiツールを選択できるようにする。

- [ ] プロジェクト作成UIでAIツール選択リストにセパレータとGeminiオプションを追加する
- [ ] AIToolServiceでGeminiツールを特別扱いする仕組みを実装する
- [ ] UIでGeminiとその他のツールを視覚的に区別できるようにする

### 1.3 プロジェクト実行エンジンの改修

現在はGemini固定で実行しているロジックを、選択されたAIツールに応じて実行するように変更する。

- [ ] ProjectServiceで選択されたAIツールの種類を判定し、適切な実行方法を選択する
- [ ] Geminiツール実行とコマンドベースツール実行の両方をサポートする
- [ ] エラーハンドリングと進捗管理を統一的に処理する

## フェーズ2: UI改善とテスト強化

### 2.1 ユーザーインターフェースの改善

- [ ] AIツール管理画面でのコマンド設定UI実装
- [ ] プロジェクト詳細表示での実行方法表示
- [ ] エラーメッセージの改善

### 2.2 テストの追加と改善

- [ ] 新しいAIToolモデルのユニットテスト
- [ ] コマンド実行機能のインテグレーションテスト
- [ ] E2Eテストの更新

## フェーズ3: 運用機能の拡充

### 3.1 設定管理の改善

- [ ] 環境別設定の分離
- [ ] AIツール設定の動的リロード
- [ ] 設定値のバリデーション強化

### 3.2 監視とログ機能

- [ ] 実行ログの詳細化
- [ ] パフォーマンス監視
- [ ] エラー追跡の改善

## 注意事項

- 各フェーズの作業は、前フェーズの完了後に開始する
- 変更は段階的に実装し、各段階でテストを実行してリグレッションを防ぐ
- 既存機能への影響を最小限に抑える
- 全ての変更後は `just test-all strict` を実行して品質を確保する
